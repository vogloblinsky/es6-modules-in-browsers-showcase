!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,o){"use strict";function i(t,e){return(e||document).querySelector(t)}function n(t,e){return(e||document).querySelectorAll(t)}function r(t,e,o,i){t.addEventListener(e,o,!!i)}function c(t,e,o,i){function c(o){var r=o.target,c=n(e,t);Array.prototype.indexOf.call(c,r)>=0&&i.call(r,o)}r(t,o,c,"blur"===o||"focus"===o)}function l(t,e){if(t.parentNode)return t.parentNode.tagName.toLowerCase()===e.toLowerCase()?t.parentNode:l(t.parentNode,e)}function a(t,e){var o=t.indexOf(e);if(-1===o)return t;t.splice(o,1)}o.d(e,"d",function(){return i}),o.d(e,"e",function(){return n}),o.d(e,"b",function(){return r}),o.d(e,"a",function(){return c}),o.d(e,"c",function(){return l}),o.d(e,"f",function(){return a}),NodeList.prototype.forEach=Array.prototype.forEach},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),n=o(0);Object(n.b)(window,"load",i.a),Object(n.b)(window,"hashchange",i.a)},function(t,e,o){"use strict";function i(){Object(n.a)()}e.a=i;var n=o(3)},function(t,e,o){"use strict";function i(t){this.storage=new a.a(t),this.model=new l.a(this.storage),this.template=new d.a,this.view=new r.a(this.template),this.controller=new c.a(this.model,this.view)}function n(){s=new i("todos-vanillajs"),s.controller.setView(document.location.hash),u.forEach(function(t){return t()})}o.d(e,"a",function(){return n});var r=o(4),c=o(5),l=o(6),a=o(7),d=o(8),s=(o(0),void 0),u=[]},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){Object(a.d)(".filters .selected").className="",Object(a.d)('.filters [href="#/'+t+'"]').className="selected"}function r(t,e){var o=Object(a.d)('[data-id="'+t+'"]');o&&(o.className=e?"completed":"",Object(a.d)("input",o).checked=e)}function c(t,e){var o=Object(a.d)('[data-id="'+t+'"]');if(o){o.className=o.className+" editing";var i=document.createElement("input");i.className="edit",o.appendChild(i),i.focus(),i.value=e}}function l(t){var e=Object(a.c)(t,"li");return parseInt(e.dataset.id,10)}var a=o(0),d=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this.template=e,this.ENTER_KEY=13,this.ESCAPE_KEY=27,this.$todoList=Object(a.d)(".todo-list"),this.$todoItemCounter=Object(a.d)(".todo-count"),this.$clearCompleted=Object(a.d)(".clear-completed"),this.$main=Object(a.d)(".main"),this.$footer=Object(a.d)(".footer"),this.$toggleAll=Object(a.d)(".toggle-all"),this.$newTodo=Object(a.d)(".new-todo")}return d(t,[{key:"_removeItem",value:function(t){var e=Object(a.d)('[data-id="'+t+'"]');e&&this.$todoList.removeChild(e)}},{key:"_clearCompletedButton",value:function(t,e){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(t),this.$clearCompleted.style.display=e?"block":"none"}},{key:"_editItemDone",value:function(t,e){var o=Object(a.d)('[data-id="'+t+'"]');if(o){var i=Object(a.d)("input.edit",o);o.removeChild(i),o.className=o.className.replace("editing",""),Object(a.e)("label",o).forEach(function(t){t.textContent=e})}}},{key:"render",value:function(t,e){var o=this;({showEntries:function(){o.$todoList.innerHTML=o.template.show(e)},removeItem:function(){o._removeItem(e)},updateElementCount:function(){o.$todoItemCounter.innerHTML=o.template.itemCounter(e)},clearCompletedButton:function(){o._clearCompletedButton(e.completed,e.visible)},contentBlockVisibility:function(){o.$main.style.display=o.$footer.style.display=e.visible?"block":"none"},toggleAll:function(){o.$toggleAll.checked=e.checked},setFilter:function(){n(e)},clearNewTodo:function(){o.$newTodo.value=""},elementComplete:function(){r(e.id,e.completed)},editItem:function(){c(e.id,e.title)},editItemDone:function(){o._editItemDone(e.id,e.title)}})[t]()}},{key:"_bindItemEditDone",value:function(t){var e=this;Object(a.a)(e.$todoList,"li .edit","blur",function(){this.dataset.iscanceled||t({id:l(this),title:this.value})}),Object(a.a)(e.$todoList,"li .edit","keypress",function(t){t.keyCode===e.ENTER_KEY&&this.blur()})}},{key:"_bindItemEditCancel",value:function(t){var e=this;Object(a.a)(e.$todoList,"li .edit","keyup",function(o){o.keyCode===e.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),t({id:l(this)}))})}},{key:"bind",value:function(t,e){var o=this;"newTodo"===t?Object(a.b)(o.$newTodo,"change",function(){e(o.$newTodo.value)}):"removeCompleted"===t?Object(a.b)(o.$clearCompleted,"click",function(){e()}):"toggleAll"===t?Object(a.b)(o.$toggleAll,"click",function(){e({completed:this.checked})}):"itemEdit"===t?Object(a.a)(o.$todoList,"li label","dblclick",function(){e({id:l(this)})}):"itemRemove"===t?Object(a.a)(o.$todoList,".destroy","click",function(){e({id:l(this)})}):"itemToggle"===t?Object(a.a)(o.$todoList,".toggle","click",function(){e({id:l(this),completed:this.checked})}):"itemEditDone"===t?o._bindItemEditDone(e):"itemEditCancel"===t&&o._bindItemEditCancel(e)}}]),t}();e.a=s},function(t,e,o){"use strict";function i(t,e){var o=this;o.model=t,o.view=e,o.view.bind("newTodo",function(t){o.addItem(t)}),o.view.bind("itemEdit",function(t){o.editItem(t.id)}),o.view.bind("itemEditDone",function(t){o.editItemSave(t.id,t.title)}),o.view.bind("itemEditCancel",function(t){o.editItemCancel(t.id)}),o.view.bind("itemRemove",function(t){o.removeItem(t.id)}),o.view.bind("itemToggle",function(t){o.toggleComplete(t.id,t.completed)}),o.view.bind("removeCompleted",function(){o.removeCompletedItems()}),o.view.bind("toggleAll",function(t){o.toggleAll(t.completed)})}e.a=i,i.prototype.setView=function(t){var e=t.split("/")[1],o=e||"";this._updateFilterState(o)},i.prototype.showAll=function(){var t=this;t.model.read(function(e){t.view.render("showEntries",e)})},i.prototype.showActive=function(){var t=this;t.model.read({completed:!1},function(e){t.view.render("showEntries",e)})},i.prototype.showCompleted=function(){var t=this;t.model.read({completed:!0},function(e){t.view.render("showEntries",e)})},i.prototype.addItem=function(t){var e=this;""!==t.trim()&&e.model.create(t,function(){e.view.render("clearNewTodo"),e._filter(!0)})},i.prototype.editItem=function(t){var e=this;e.model.read(t,function(o){e.view.render("editItem",{id:t,title:o[0].title})})},i.prototype.editItemSave=function(t,e){var o=this;e.trim()?o.model.update(t,{title:e},function(){o.view.render("editItemDone",{id:t,title:e})}):o.removeItem(t)},i.prototype.editItemCancel=function(t){var e=this;e.model.read(t,function(o){e.view.render("editItemDone",{id:t,title:o[0].title})})},i.prototype.removeItem=function(t){var e=this;e.model.remove(t,function(){e.view.render("removeItem",t)}),e._filter()},i.prototype.removeCompletedItems=function(){var t=this;t.model.read({completed:!0},function(e){e.forEach(function(e){t.removeItem(e.id)})}),t._filter()},i.prototype.toggleComplete=function(t,e,o){var i=this;i.model.update(t,{completed:e},function(){i.view.render("elementComplete",{id:t,completed:e})}),o||i._filter()},i.prototype.toggleAll=function(t){var e=this;e.model.read({completed:!t},function(o){o.forEach(function(o){e.toggleComplete(o.id,t,!0)})}),e._filter()},i.prototype._updateCount=function(){var t=this;t.model.getCount(function(e){t.view.render("updateElementCount",e.active),t.view.render("clearCompletedButton",{completed:e.completed,visible:e.completed>0}),t.view.render("toggleAll",{checked:e.completed===e.total}),t.view.render("contentBlockVisibility",{visible:e.total>0})})},i.prototype._filter=function(t){var e=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount(),(t||"All"!==this._lastActiveRoute||this._lastActiveRoute!==e)&&this["show"+e](),this._lastActiveRoute=e},i.prototype._updateFilterState=function(t){t=t.split("?")[0],this._activeRoute=t,""===t&&(this._activeRoute="All"),this._filter(),this.view.render("setFilter",t)}},function(t,e,o){"use strict";function i(t){this.storage=t}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=i,i.prototype.create=function(t,e){t=t||"",e=e||function(){};var o={title:t.trim(),completed:!1};this.storage.save(o,e)},i.prototype.read=function(t,e){var o=void 0===t?"undefined":n(t);if(e=e||function(){},"function"===o)return e=t,this.storage.findAll(e);"string"===o||"number"===o?(t=parseInt(t,10),this.storage.find({id:t},e)):this.storage.find(t,e)},i.prototype.update=function(t,e,o){this.storage.save(e,o,t)},i.prototype.remove=function(t,e){this.storage.remove(t,e)},i.prototype.removeAll=function(t){this.storage.drop(t)},i.prototype.getCount=function(t){var e={active:0,completed:0,total:0};this.storage.findAll(function(o){o.forEach(function(t){t.completed?e.completed++:e.active++,e.total++}),t(e)})}},function(t,e,o){"use strict";function i(t,e){if(e=e||function(){},this._dbName=t,!localStorage[t]){var o={todos:[]};localStorage[t]=JSON.stringify(o)}e.call(this,JSON.parse(localStorage[t])),this.subscribers=[]}var n=o(0);e.a=i,i.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){return Object(n.f)(e.subscribers,t)}},i.prototype._notify=function(){this.subscribers.forEach(function(t){return t()})},i.prototype.find=function(t,e){if(e){var o=JSON.parse(localStorage[this._dbName]).todos;e.call(this,o.filter(function(e){for(var o in t)if(t[o]!==e[o])return!1;return!0}))}},i.prototype.findAll=function(t){t=t||function(){},t.call(this,JSON.parse(localStorage[this._dbName]).todos)},i.prototype.save=function(t,e,o){var i=JSON.parse(localStorage[this._dbName]),n=i.todos;if(e=e||function(){},o){for(var r=0;r<n.length;r++)if(n[r].id===o){for(var c in t)n[r][c]=t[c];break}localStorage[this._dbName]=JSON.stringify(i),e.call(this,JSON.parse(localStorage[this._dbName]).todos)}else t.id=(new Date).getTime(),n.push(t),localStorage[this._dbName]=JSON.stringify(i),e.call(this,[t]);this._notify()},i.prototype.remove=function(t,e){for(var o=JSON.parse(localStorage[this._dbName]),i=o.todos,n=0;n<i.length;n++)if(i[n].id===t){i.splice(n,1);break}localStorage[this._dbName]=JSON.stringify(o),e.call(this,JSON.parse(localStorage[this._dbName]).todos),this._notify()},i.prototype.drop=function(t){localStorage[this._dbName]=JSON.stringify({todos:[]}),t.call(this,JSON.parse(localStorage[this._dbName]).todos),this._notify()}},function(t,e,o){"use strict";function i(){this.defaultTemplate='\n    <li data-id="{{id}}" class="{{completed}}">\n      <div class="view">\n        <input class="toggle" type="checkbox" {{checked}} />\n        <label>{{title}}</label>\n        <button class="destroy"></button>\n      </div>\n    </li>\n  '}e.a=i;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(t){return n[t]},c=/[&<>"'`]/g,l=new RegExp(c.source),a=function(t){return t&&l.test(t)?t.replace(c,r):t};i.prototype.show=function(t){var e,o,i="";for(e=0,o=t.length;e<o;e++){var n=this.defaultTemplate,r="",c="";t[e].completed&&(r="completed",c="checked"),n=n.replace("{{id}}",t[e].id),n=n.replace("{{title}}",a(t[e].title)),n=n.replace("{{completed}}",r),n=n.replace("{{checked}}",c),i+=n}return i},i.prototype.itemCounter=function(t){return"<strong>"+t+"</strong> item"+(1===t?"":"s")+" left"},i.prototype.clearCompletedButton=function(t){return t>0?"Clear completed":""}}]);